<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carregando...</title>

  <link rel="stylesheet" href="css/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- opcional: preconnect para suavizar carregamento de fontes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
</head>

<body>
  <!-- SPLASH -->
  <div id="splash-screen" class="splash-screen" aria-hidden="false">
    <div class="logo">
      <img src="images/logo1.png" alt="Logo" />
    </div>
    <div class="loading-indicator">
      <i class="fas fa-circle-notch fa-spin"></i> CARREGANDO...
    </div>
  </div>

  <!-- APP -->
  <main id="app" class="app modal-hidden" aria-hidden="true">

    <!-- Topbar -->
    <header class="topbar">
      <div class="brand">
        <img src="images/logo1.png" alt="Logo" class="brand-logo" />
      </div>

      <div class="pill-amount" id="pillAmount" aria-label="Saldo">
        <span>R$</span>
        <strong id="saldoTop">50,00</strong>
      </div>
    </header>

    <!-- Progress -->
    <section class="progress-wrap" aria-label="Progresso">
      <div class="progress-label">Seu progresso</div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill" style="width: 18%"></div>
      </div>
    </section>

    <!-- Stage container -->
    <section class="stage" id="stage">

      <!-- STEP: MODAL INICIAL -->
      <div class="step is-active" id="stepIntro">
        <div class="card hero-card">
          <div class="hero-badge">
            <i class="fa-solid fa-circle-check"></i>
            <span>Pronto para continuar</span>
          </div>

          <h1 class="hero-title">Parab√©ns!</h1>
          <p class="hero-sub">Voc√™ ganhou uma licen√ßa com saldo dispon√≠vel.</p>

          <div class="amount-card">
            <div class="amount-label">Saldo liberado</div>
            <div class="amount-value">R$ <span id="saldoIntro">50,00</span></div>
            <div class="amount-note">Para prosseguir, fa√ßa 3 avalia√ß√µes.</div>
          </div>

          <button class="btn btn-primary" id="startButton">
            Come√ßar
            <i class="fa-solid fa-arrow-right"></i>
          </button>

          <p class="muted small">
            Dica: mantenha esta p√°gina aberta para concluir a sequ√™ncia.
          </p>
        </div>
      </div>

      <!-- STEP: DIGITAR C√ìDIGO -->
      <div class="step" id="stepCode">
        <div class="center-head">
          <div class="status-dot"></div>
          <div class="center-title">Preencha o c√≥digo para receber o valor!</div>
        </div>

        <div class="card code-card">
          <div class="code-top">
            <div class="code-top-label">Valor:</div>
            <div class="code-top-value">R$ <span id="valorAtual">49,67</span></div>
          </div>

          <div class="code-box">
            <div class="code-box-title">C√ìDIGO</div>
            <div class="code-big" id="codeBig">V Z K P</div>
          </div>

          <div class="code-instruction">Digite o c√≥digo acima</div>

          <div class="code-inputs" id="codeInputs" aria-label="C√≥digo de 4 letras">
            <input class="code-input" inputmode="text" maxlength="1" autocomplete="off" />
            <input class="code-input" inputmode="text" maxlength="1" autocomplete="off" />
            <input class="code-input" inputmode="text" maxlength="1" autocomplete="off" />
            <input class="code-input" inputmode="text" maxlength="1" autocomplete="off" />
          </div>

          <button class="btn btn-secondary" id="btnConfirmCode" disabled>
            Confirmar c√≥digo
          </button>

          <p class="muted small">Ao completar, voc√™ avan√ßa automaticamente.</p>
        </div>
      </div>

      <!-- STEP: LOADER COM QR (fundo branco, ‚Äúna mesma tela‚Äù) -->
      <div class="step" id="stepQrLoading">
        <div class="card qr-card">
          <div class="qr-head">
            <div class="qr-title">Atualizando seu cashback‚Ä¶</div>
            <div class="qr-sub">Aguarde alguns instantes</div>
          </div>

          <div class="qr-frame">
            <!-- Voc√™ pode trocar por um IMG real do QR se tiver -->
            <div class="qr-fake" aria-hidden="true">
              <div class="qr-grid"></div>
              <div class="qr-scanline"></div>
            </div>
          </div>

          <div class="qr-dots" aria-hidden="true">
            <span></span><span></span><span></span>
          </div>

          <p class="muted small">N√£o feche esta p√°gina.</p>
        </div>
      </div>

      <!-- STEP: AVALIA√á√ÉO -->
      <div class="step" id="stepRating">
        <div class="card rating-card">
          <h2 class="rating-title">Qual sua opini√£o sobre este produto?</h2>

          <div class="rating-buttons">
            <button class="btn btn-like" data-rate="like">
              <span class="emoji">üôÇ</span> Eu gosto.
            </button>

            <button class="btn btn-mid" data-rate="mid">
              <span class="emoji">üòê</span> N√£o sou muito f√£‚Ä¶
            </button>

            <button class="btn btn-hate" data-rate="hate">
              <span class="emoji">üò°</span> Eu ODEIO!
            </button>
          </div>

          <p class="muted small">
            Ap√≥s avaliar, seu saldo √© atualizado automaticamente.
          </p>
        </div>
      </div>

    </section>
  </main>

  <!-- SUCCESS OVERLAY (check + confete moderno) -->
  <div id="successOverlay" class="success-overlay" aria-hidden="true">
    <canvas id="confettiCanvas"></canvas>

    <div class="success-modal" role="dialog" aria-modal="true" aria-label="Sucesso">
      <div class="success-icon">
        <i class="fa-solid fa-check"></i>
      </div>

      <h3 class="success-title" id="successTitle">Saldo atualizado!</h3>
      <p class="success-sub">Voc√™ recebeu:</p>
      <div class="success-amount">R$ <span id="successAmount">49,67</span></div>

      <button class="btn btn-primary" id="successContinue">
        Continuar
      </button>
    </div>
  </div>

  <!-- SOM (voc√™ disse que vai colocar em /media; deixei o caminho padr√£o) -->
  <audio id="moneySound" preload="auto">
    <source src="media/money.mp3" type="audio/mpeg" />
  </audio>

  <script src="js/ui-enhancements.js"></script>
  <script src="js/script.js"></script>
  <script src="js/utm-helper.js"></script>
</body>
</html>

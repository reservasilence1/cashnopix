<!DOCTYPE html>
<html lang="pt-BR" style="height: 100%;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Avaliação Dinâmica</title>

  <link rel="stylesheet" href="/avaliar/css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">



  <script>
    window.pixelId = "695370798f85d4219df79574";
    var a = document.createElement("script");
    a.setAttribute("async", "");
    a.setAttribute("defer", "");
    a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
    document.head.appendChild(a);
  </script>
  <script
    src="https://cdn.utmify.com.br/scripts/utms/latest.js"
    data-utmify-prevent-xcod-sck
    data-utmify-prevent-subids
    async
    defer
  ></script>

  <!-- ✅ OVERRIDES: animação de sucesso sofisticada + confetes só no centro (não preenche a tela) -->
  <style>
    /* Mantém o overlay existente, mas sem “pintar”/preencher a tela */
    #successOverlay.success-overlay{
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: transparent !important; /* não escurece a tela */
      display: grid;
      place-items: center;
      pointer-events: none; /* não bloqueia cliques */
    }

    /* “Badge” central sofisticado */
    .success-badge{
      width: 190px;
      height: 190px;
      border-radius: 999px;
      display: grid;
      place-items: center;
      position: relative;
      overflow: visible;
      transform: scale(.92);
      animation: successBadgePop 520ms cubic-bezier(.2,.85,.2,1) forwards;
      filter: drop-shadow(0 18px 38px rgba(0,0,0,.18));
    }

    /* Anel externo sutil */
    .success-badge::before{
      content:"";
      position:absolute;
      inset:-10px;
      border-radius: inherit;
      background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.55), rgba(255,255,255,0) 55%);
      border: 1px solid rgba(46, 204, 113, .18);
      opacity: .95;
    }

    /* “Cartão” interno */
    .success-badge-inner{
      width: 150px;
      height: 150px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.95), rgba(255,255,255,.75));
      border: 1px solid rgba(0,0,0,.06);
      display: grid;
      place-items: center;
      position: relative;
      overflow: hidden;
    }

    /* Brilho passando */
    .success-badge-inner::after{
      content:"";
      position:absolute;
      top:-60%;
      left:-80%;
      width: 140%;
      height: 140%;
      transform: rotate(18deg);
      background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.45), rgba(255,255,255,0));
      animation: successShine 820ms ease-out forwards;
      opacity: .9;
    }

    /* Substitui a animação do ícone para ficar “premium” */
    #successOverlay .success-animation-icon{
      font-size: 64px;
      color: #20c35a; /* verde alinhado ao layout */
      transform: translateZ(0);
      animation: successCheck 520ms cubic-bezier(.15,.95,.25,1) forwards;
      text-shadow: 0 10px 20px rgba(32,195,90,.22);
    }

    /* Confetti confinado no badge (não espalha pela tela) */
    .confetti-wrap{
      position:absolute;
      inset:-14px; /* um pouquinho além do badge */
      border-radius: 999px;
      overflow:hidden; /* <-- confete não vaza pro resto da tela */
      pointer-events:none;
    }

    .confetti-piece{
      position:absolute;
      width: 10px;
      height: 14px;
      border-radius: 3px;
      opacity: 0;
      transform: translate3d(0,0,0) rotate(0deg);
      animation: confettiBurst 760ms cubic-bezier(.18,.86,.22,1) forwards;
      will-change: transform, opacity;
    }

    /* Keyframes */
    @keyframes successBadgePop{
      0%   { transform: scale(.78); opacity: 0; }
      60%  { transform: scale(1.02); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes successCheck{
      0%   { transform: scale(.55); opacity: 0; }
      70%  { transform: scale(1.08); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes successShine{
      0%   { transform: translateX(-30%) rotate(18deg); opacity: 0; }
      35%  { opacity: .85; }
      100% { transform: translateX(160%) rotate(18deg); opacity: 0; }
    }

    @keyframes confettiBurst{
      0%{
        opacity: 0;
        transform: translate3d(var(--x0), var(--y0), 0) rotate(var(--r0));
      }
      12%{ opacity: 1; }
      100%{
        opacity: 0;
        transform: translate3d(var(--x1), var(--y1), 0) rotate(var(--r1));
      }
    }

    /* Respeita acessibilidade */
    @media (prefers-reduced-motion: reduce){
      .success-badge,
      #successOverlay .success-animation-icon,
      .confetti-piece,
      .success-badge-inner::after{
        animation: none !important;
      }
    }
  </style>
</head>

<body style="min-height: 100%;">

  <audio id="successSound" src="/avaliar/media/success.mp3" preload="auto"></audio>

  <div id="finalSuccessModal" class="final-overlay-full hidden-screen">
    <div class="final-modal-content">
      <h1>Parabéns!</h1>

      <p class="final-prize-text">Você acaba de ganhar <b><span id="finalPrizeValue">R$ 50,00</span>!</b></p>

      <p class="final-instruction-text">
        Assista um curto vídeo com um passo a passo
        explicativo para você aprender a cadastrar sua chave <b>PIX</b> e realizar o seu
        primeiro <b>SAQUE</b>.
      </p>

      <button class="final-cta-button" id="watchVideoButton">
        Assistir vídeo
      </button>
    </div>
  </div>

  <div id="processingModal" class="modal-overlay hidden-screen">
    <div class="modal-content-centered">
      <div class="qr-code-container">
        <img src="/avaliar/images/qrcode.svg" alt="QR Code de Pagamento" class="qr-code-image">
        <div class="scan-line" id="scanLine"></div>
      </div>

      <div class="consulting-text">
        <i class="fas fa-circle-notch loading-spinner-small"></i> CONSULTANDO CÓDIGO...
      </div>
    </div>
  </div>

  <!-- ✅ Mantém o ID original para não quebrar seu script.js; só trocamos o “miolo” para ficar premium -->
  <div id="successOverlay" class="success-overlay hidden-screen" aria-hidden="true">
    <div class="success-badge" role="status" aria-live="polite">
      <div class="confetti-wrap" id="confettiWrap"></div>

      <div class="success-badge-inner">
        <i class="fas fa-check success-animation-icon"></i>
      </div>
    </div>
  </div>

  <header class="fixed-header">
    <div class="logo-text">cashnopix</div>

    <div class="saldo-button" id="currentSaldoContainer">
      <span id="currentSaldo">R$ 50,00</span>
    </div>
    <span class="cashback-animation-value" id="cashbackAnimation"></span>
  </header>

  <div class="progress-container">
    <p class="progress-label" id="progressLabel">Seu progresso</p>
    <div class="progress-bar">
      <div class="progress-fill" id="progressBarFill" style="width: 0%;"></div>
    </div>
  </div>

  <div class="screen-body" id="loadingScreen">
    <div class="circle-spinner">
      <i class="fas fa-search search-icon"></i>
    </div>

    <div class="loading-text">
      <i class="fas fa-circle-notch loading-spinner"></i> PROCURANDO VALORES PARA SAQUE
    </div>
  </div>

  <div class="screen-body hidden-screen" id="codeScreen">
    <div class="message-check">
      <i class="fas fa-check-circle"></i> PREENCHA O CÓDIGO PARA RECEBER O VALOR!
    </div>

    <div class="code-box-container">
      <div class="code-box-header">
        Valor: <span id="codeBoxHeaderValue">R$ 49,67</span>
      </div>
      <div class="code-box-content">
        <p class="code-label">CÓDIGO</p>
        <div class="code-display" id="codeDisplayArea">
          <span class="code-char">L</span>
          <span class="code-char">M</span>
          <span class="code-char">N</span>
          <span class="code-char">O</span>
        </div>
      </div>
    </div>

    <p class="input-instruction">Digite o código acima</p>

    <div class="code-input-area" id="codeInputArea">
      <input type="text" maxlength="1" class="input-square" data-index="0">
      <input type="text" maxlength="1" class="input-square" data-index="1">
      <input type="text" maxlength="1" class="input-square" data-index="2">
      <input type="text" maxlength="1" class="input-square" data-index="3">
    </div>

    <div class="spacer-area"></div>
  </div>

  <div class="screen-body hidden-screen" id="evaluationScreen">

    <div class="evaluation-item" id="evaluation-0">
      <p class="cashback-message">
        <span data-client-name="0">Beatriz S.</span> esqueceu R$
        <span data-cashback-value="0">49,67</span> de cashback.<br>
        Receba esse valor em forma de **PIX**
      </p>

      <div class="product-container">
        <div class="product-image-card" style="background-color: #364047;">
          <div class="value-label">VALOR: R$ 49,67</div>
          <img src="/avaliar/images/fogao.jpg" alt="Fogão" class="product-img">
          <div class="timer-label" id="timer-0">Tempo restante: 02:20</div>
        </div>
      </div>

      <h3 class="question-text">O que você acha desse fogão das Casas Bahia?</h3>
    </div>

    <div class="evaluation-item hidden-screen" id="evaluation-1">
      <p class="cashback-message">
        <span data-client-name="1">João A.</span> esqueceu R$
        <span data-cashback-value="1">44,67</span> de cashback.<br>
        Receba esse valor em forma de **PIX**
      </p>

      <div class="product-container">
        <div class="product-image-card" style="background-color: #364047;">
          <div class="value-label">VALOR: R$ 44,67</div>
          <img src="/avaliar/images/celular.jpg" alt="Samsung Galaxy S24 Ultra" class="product-img">
          <div class="timer-label" id="timer-1">Tempo restante: 02:20</div>
        </div>
      </div>

      <h3 class="question-text">Qual sua opinião sobre o novo lançamento da Samsung?</h3>
    </div>

    <div class="evaluation-item hidden-screen" id="evaluation-2">
      <p class="cashback-message">
        <span data-client-name="2">Camila B.</span> esqueceu R$
        <span data-cashback-value="2">57,75</span> de cashback.<br>
        Receba esse valor em forma de **PIX**
      </p>

      <div class="product-container">
        <div class="product-image-card" style="background-color: #FF0000;">
          <div class="value-label">VALOR: R$ 57,75</div>
          <img src="/avaliar/images/panela.jpg" alt="Jogo de Panelas" class="product-img">
          <div class="timer-label" id="timer-2">Tempo restante: 02:20</div>
        </div>
      </div>

      <h3 class="question-text">Qual sua opinião sobre esse jogo de panelas da Americanas?</h3>
    </div>

    <div class="opinion-buttons">
      <button class="opinion-button like-button" data-vote="like">
        <i class="far fa-smile"></i> Eu gosto.
      </button>
      <button class="opinion-button neutral-button" data-vote="neutral">
        <i class="far fa-meh"></i> Não sou muito fã...
      </button>
      <button class="opinion-button dislike-button" data-vote="dislike">
        <i class="far fa-frown"></i> Eu ODEIO!
      </button>
    </div>

    <div class="spacer-area"></div>
  </div>

  <!-- ✅ Confetti “local” (só no centro) acionado automaticamente quando seu script.js mostrar o successOverlay -->
  <script>
    (function () {
      const overlay = document.getElementById("successOverlay");
      const wrap = document.getElementById("confettiWrap");
      if (!overlay || !wrap) return;

      // Paleta alinhada com o layout (verde + acentos suaves)
      const colors = ["#20c35a", "#34d399", "#16a34a", "#a7f3d0", "#f59e0b", "#60a5fa"];

      function burstConfetti() {
        // limpa antes (evita acúmulo)
        wrap.innerHTML = "";

        const count = 34; // sofisticado, mas leve
        for (let i = 0; i < count; i++) {
          const p = document.createElement("span");
          p.className = "confetti-piece";

          const w = 6 + Math.random() * 8;
          const h = 8 + Math.random() * 14;
          const left = 50 + (Math.random() * 40 - 20); // concentra no centro
          const top = 58 + (Math.random() * 22 - 11);  // nasce atrás do check

          const x1 = (Math.random() * 220 - 110) + "px";
          const y1 = (-(90 + Math.random() * 120)) + "px";
          const x0 = (Math.random() * 12 - 6) + "px";
          const y0 = (Math.random() * 12 - 6) + "px";

          const r0 = (Math.random() * 120 - 60) + "deg";
          const r1 = (360 + Math.random() * 540) + "deg";

          p.style.width = w + "px";
          p.style.height = h + "px";
          p.style.left = left + "%";
          p.style.top = top + "%";
          p.style.background = colors[Math.floor(Math.random() * colors.length)];
          p.style.setProperty("--x0", x0);
          p.style.setProperty("--y0", y0);
          p.style.setProperty("--x1", x1);
          p.style.setProperty("--y1", y1);
          p.style.setProperty("--r0", r0);
          p.style.setProperty("--r1", r1);
          p.style.animationDelay = (Math.random() * 90) + "ms";

          wrap.appendChild(p);
        }
      }

      // Observa seu fluxo atual: quando o JS remover "hidden-screen" do successOverlay, dispara o confetti.
      const obs = new MutationObserver(() => {
        const isVisible = !overlay.classList.contains("hidden-screen");
        if (isVisible) {
          burstConfetti();
        }
      });

      obs.observe(overlay, { attributes: true, attributeFilter: ["class"] });

      // (Opcional) se por algum motivo abrir já visível
      if (!overlay.classList.contains("hidden-screen")) {
        burstConfetti();
      }
    })();
  </script>

  <!-- Seus scripts originais (mantidos) -->
  <script src="/avaliar/js/script.js"></script>
  <script src="/avaliar/js/utm-helper.js"></script>

</body>
</html>
